---
import Wrapper from "../components/shared/Wrapper.astro";
import FooterLogo from "../components/Logos/FooterLogo.astro";
import FooterNav from "../components/Navigation/FooterNav/FooterNav.astro";
import SocialMediaLinks from "../components/SocialMedia/SocialMediaLinks.astro";

import "./footer.scss";

import {
  Logo_Options_Query,
  Footer_Menu_Query,
  Social_Media_Links_Query,
  Contact_Information_Query,
} from "../data/footer/queries";

const response = await fetch(`${import.meta.env.PUBLIC_WP_URL}/graphql`, {
  method: "POST",
  headers: {
    "content-type": "application/json",
  },
  body: JSON.stringify({
    query: `
        query headerQuery {
          ${Logo_Options_Query}
          ${Footer_Menu_Query}
          ${Social_Media_Links_Query}
          ${Contact_Information_Query}
        }
    `,
  }),
});
const {
  data: {
    footerLogo: { logoOptions },
    socialMediaLinks,
    footerMenu,
    contactInformation,
  },
} = await response.json();
---

<footer class="footer">
  <div class="footer-strip"></div>
  <Wrapper classes="footer-wrapper">
    <div class="footer-logo">
      <div class="footer-logo__container">
        <FooterLogo data={logoOptions} />
      </div>
    </div>
    <div class="footer-contact">
      <p>
        Call Today! <br />
        <a href={`tel:+1${contactInformation.contactOptions.phoneNumber}`}
          >{contactInformation.contactOptions.phoneNumber}</a
        >
      </p>
    </div>
    <div class="footer-social">
      <SocialMediaLinks data={socialMediaLinks} />
    </div>
    <div class="footer-nav">
      <FooterNav items={footerMenu.menuItems.nodes} />
    </div>
  </Wrapper>
</footer>
